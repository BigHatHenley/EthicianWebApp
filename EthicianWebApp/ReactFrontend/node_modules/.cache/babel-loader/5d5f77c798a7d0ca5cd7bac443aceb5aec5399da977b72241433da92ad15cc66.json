{"ast":null,"code":"import React,{useState}from'react';import'./MultiChatXpertPage.css';import ChatEditor from'./ChatEditor';import ConvoContainer from'./ConvoContainer';// Adjust the import path if necessary\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MyUI(){const[messages,setMessages]=useState([]);const[buttonStates,setButtonStates]=useState(Array(15).fill(false));const[selectedOption,setSelectedOption]=useState(\"GPT-4o\");// Add state for selected option\nconst handleSendMessage=async(message,file)=>{try{// Add user's message to messages state\nconst newUserMessage={text:message,sender:'user'};setMessages([...messages,newUserMessage]);const formData=new FormData();formData.append('text',message);if(file){formData.append('file',file);}// Adding selected experts to the formData\nconst selectedExperts=buttonStates.reduce((acc,state,index)=>{if(state){acc.push(index);}return acc;},[]);formData.append('selected_experts',JSON.stringify(selectedExperts));// Send selected option to backend\nformData.append('selected_option',selectedOption);// Fetch CSRF token from cookie\nconst csrfToken=document.cookie.match(/csrftoken=([^ ;]+)/)[1];const response=await fetch('http://localhost:3000/multichatxpert',{method:'POST',headers:{'X-CSRFToken':csrfToken// Include CSRF token in headers\n},body:formData});if(!response.ok){throw new Error('Network response was not ok');}const responseData=await response.json();console.log('Agent Response:',responseData.result);// Log agent's response\n// Add agent's response to messages state\nconst newAgentMessage={text:responseData.result,// Assuming the result contains the agent's response\nsender:'agent'};console.log('New Agent Message:',newAgentMessage);// Log new agent message\nsetMessages([...messages,newAgentMessage]);}catch(error){console.error('Error sending message:',error);const errorMessage={text:message,sender:'agent',result:'Error occurred in Multi, please try again.'};setMessages([...messages,errorMessage]);}};const handleOptionChange=event=>{setSelectedOption(event.target.value);};const handleButtonClick=index=>{setButtonStates(prevButtonStates=>{const newButtonStates=[...prevButtonStates];newButtonStates[index]=!newButtonStates[index];// Toggle button state\nreturn newButtonStates;});};const generateButtonMatrix=()=>{return[{index:0,expert:\"Ethician\"},{index:1,expert:\"Mechanical Engineer\"},{index:2,expert:\"Metallurgist\"},{index:3,expert:\"Safety Engineer\"},{index:4,expert:\"Materials Engineer\"},{index:5,expert:\"Robotics Engineer\"},{index:6,expert:\"Electrical Engineer\"},{index:7,expert:\"Civil Engineer\"},{index:8,expert:\"Software Engineer\"},{index:9,expert:\"Chemical Engineer\"},{index:10,expert:\"Aerospace Engineer\"},{index:11,expert:\"Petroleum Engineer\"},{index:12,expert:\"Biomedical Engineer\"},{index:13,expert:\"Environment Engineer\"},{index:14,expert:\"Quality Engineer\"}].map(_ref=>{let{index,expert}=_ref;return/*#__PURE__*/_jsx(\"button\",{className:`expert-button ${buttonStates[index]?'active':''}`,onClick:()=>{handleButtonClick(index);// Set bXEnabled variable (you can adjust the name if needed)\nconst bXEnabled=buttonStates[index];console.log(`b${index+1}Enabled:`,bXEnabled);},children:expert},index);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"my-ui\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"output-box\",children:/*#__PURE__*/_jsx(ConvoContainer,{messages:messages})}),/*#__PURE__*/_jsx(\"div\",{className:\"editor-buttons\",children:/*#__PURE__*/_jsx(ChatEditor,{onSendMessage:handleSendMessage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"button-matrix\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-row\",children:generateButtonMatrix().slice(0,5)}),/*#__PURE__*/_jsx(\"div\",{className:\"button-row\",children:generateButtonMatrix().slice(5,10)}),/*#__PURE__*/_jsx(\"div\",{className:\"button-row\",children:generateButtonMatrix().slice(10,15)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"right-button\",children:\"Edit TTS\"}),/*#__PURE__*/_jsx(\"button\",{className:\"right-button\",children:\"Edit Vision (Coming Soon!)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown\",children:/*#__PURE__*/_jsxs(\"select\",{value:selectedOption,onChange:handleOptionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"GPT-4o\",children:\"GPT-4o\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Google Gemini\",children:\"Google Gemini\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Claude\",children:\"Claude\"})]})})]})]})]});}export default MyUI;","map":{"version":3,"names":["React","useState","ChatEditor","ConvoContainer","jsx","_jsx","jsxs","_jsxs","MyUI","messages","setMessages","buttonStates","setButtonStates","Array","fill","selectedOption","setSelectedOption","handleSendMessage","message","file","newUserMessage","text","sender","formData","FormData","append","selectedExperts","reduce","acc","state","index","push","JSON","stringify","csrfToken","document","cookie","match","response","fetch","method","headers","body","ok","Error","responseData","json","console","log","result","newAgentMessage","error","errorMessage","handleOptionChange","event","target","value","handleButtonClick","prevButtonStates","newButtonStates","generateButtonMatrix","expert","map","_ref","className","onClick","bXEnabled","children","onSendMessage","slice","onChange"],"sources":["C:/Users/Hat/Documents/Work Stuff/EthicianWebApp/ethician_webapp_react/src/components/MultiChatXpertPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './MultiChatXpertPage.css';\r\nimport ChatEditor from './ChatEditor';\r\nimport ConvoContainer from './ConvoContainer'; // Adjust the import path if necessary\r\n\r\nfunction MyUI() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [buttonStates, setButtonStates] = useState(Array(15).fill(false));\r\n  const [selectedOption, setSelectedOption] = useState(\"GPT-4o\"); // Add state for selected option\r\n\r\n  const handleSendMessage = async (message, file) => {\r\n    try {\r\n      // Add user's message to messages state\r\n      const newUserMessage = {\r\n        text: message,\r\n        sender: 'user',\r\n      };\r\n      setMessages([...messages, newUserMessage]);\r\n  \r\n      const formData = new FormData();\r\n      formData.append('text', message);\r\n      if (file) {\r\n        formData.append('file', file);\r\n      }\r\n  \r\n      // Adding selected experts to the formData\r\n      const selectedExperts = buttonStates.reduce((acc, state, index) => {\r\n        if (state) {\r\n          acc.push(index);\r\n        }\r\n        return acc;\r\n      }, []);\r\n      formData.append('selected_experts', JSON.stringify(selectedExperts));\r\n  \r\n      // Send selected option to backend\r\n      formData.append('selected_option', selectedOption);\r\n  \r\n      // Fetch CSRF token from cookie\r\n      const csrfToken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];\r\n  \r\n      const response = await fetch('http://localhost:3000/multichatxpert', {\r\n        method: 'POST',\r\n        headers: {\r\n          'X-CSRFToken': csrfToken, // Include CSRF token in headers\r\n        },\r\n        body: formData,\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n  \r\n      const responseData = await response.json();\r\n      console.log('Agent Response:', responseData.result); // Log agent's response\r\n  \r\n      // Add agent's response to messages state\r\n      const newAgentMessage = {\r\n        text: responseData.result, // Assuming the result contains the agent's response\r\n        sender: 'agent',\r\n      };\r\n      console.log('New Agent Message:', newAgentMessage); // Log new agent message\r\n      setMessages([...messages, newAgentMessage]);\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      const errorMessage = {\r\n        text: message,\r\n        sender: 'agent',\r\n        result: 'Error occurred in Multi, please try again.',\r\n      };\r\n      setMessages([...messages, errorMessage]);\r\n    }\r\n  };\r\n\r\n  const handleOptionChange = (event) => {\r\n    setSelectedOption(event.target.value);\r\n  };\r\n\r\n  const handleButtonClick = (index) => {\r\n    setButtonStates((prevButtonStates) => {\r\n      const newButtonStates = [...prevButtonStates];\r\n      newButtonStates[index] = !newButtonStates[index]; // Toggle button state\r\n      return newButtonStates;\r\n    });\r\n  };\r\n\r\n  const generateButtonMatrix = () => {\r\n    return [\r\n      { index: 0, expert: \"Ethician\" },\r\n      { index: 1, expert: \"Mechanical Engineer\" },\r\n      { index: 2, expert: \"Metallurgist\" },\r\n      { index: 3, expert: \"Safety Engineer\" },\r\n      { index: 4, expert: \"Materials Engineer\" },\r\n      { index: 5, expert: \"Robotics Engineer\" },\r\n      { index: 6, expert: \"Electrical Engineer\" },\r\n      { index: 7, expert: \"Civil Engineer\" },\r\n      { index: 8, expert: \"Software Engineer\" },\r\n      { index: 9, expert: \"Chemical Engineer\" },\r\n      { index: 10, expert: \"Aerospace Engineer\" },\r\n      { index: 11, expert: \"Petroleum Engineer\" },\r\n      { index: 12, expert: \"Biomedical Engineer\" },\r\n      { index: 13, expert: \"Environment Engineer\" },\r\n      { index: 14, expert: \"Quality Engineer\" }\r\n    ].map(({ index, expert }) => (\r\n      <button\r\n        key={index}\r\n        className={`expert-button ${buttonStates[index] ? 'active' : ''}`}\r\n        onClick={() => {\r\n          handleButtonClick(index);\r\n          // Set bXEnabled variable (you can adjust the name if needed)\r\n          const bXEnabled = buttonStates[index];\r\n          console.log(`b${index + 1}Enabled:`, bXEnabled);\r\n        }}\r\n      >\r\n        {expert}\r\n      </button>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"my-ui\">\r\n      <div className=\"output-box\">\r\n        <ConvoContainer messages={messages} />\r\n      </div>\r\n\r\n      <div className=\"editor-buttons\">\r\n        <ChatEditor onSendMessage={handleSendMessage} />\r\n      </div>\r\n\r\n      <div className=\"button-container\">\r\n        <div className=\"button-matrix\">\r\n          <div className=\"button-row\">\r\n            {generateButtonMatrix().slice(0, 5)}\r\n          </div>\r\n          <div className=\"button-row\">\r\n            {generateButtonMatrix().slice(5, 10)}\r\n          </div>\r\n          <div className=\"button-row\">\r\n            {generateButtonMatrix().slice(10, 15)}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"right-buttons\">\r\n          <button className=\"right-button\">Edit TTS</button>\r\n          <button className=\"right-button\">Edit Vision (Coming Soon!)</button>\r\n          <div className=\"dropdown\">\r\n            <select value={selectedOption} onChange={handleOptionChange}>\r\n              <option value=\"GPT-4o\">GPT-4o</option>\r\n              <option value=\"Google Gemini\">Google Gemini</option>\r\n              <option value=\"Claude\">Claude</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyUI;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}